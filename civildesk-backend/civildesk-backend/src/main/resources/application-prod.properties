# Production Profile Configuration
# Activate with: --spring.profiles.active=prod

# HikariCP Production Connection Pool (higher limits)
spring.datasource.hikari.maximum-pool-size=50
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.connection-timeout=20000

# Disable SQL Logging in Production (CRITICAL for performance & security)
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.org.hibernate.orm.jdbc.bind=WARN

# Production JPA Settings
# Use 'update' to automatically create/update tables on startup
# Change to 'validate' after initial setup if you want strict schema validation
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false

# API Response Compression
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript,text/css
server.compression.min-response-size=1024

# Production Logging
logging.level.root=WARN
logging.level.com.civiltech.civildesk_backend=INFO
logging.level.org.springframework=WARN
logging.level.org.springframework.web=WARN

# Redis Configuration (Production)
# Enable Redis caching for better performance
# Set REDIS_ENABLED=true in environment variables or .env file
app.redis.enabled=${REDIS_ENABLED:true}
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms

# Spring Boot Actuator Configuration (Production)
# Expose health and metrics endpoints (restricted in production)
management.endpoints.web.exposure.include=health,metrics,prometheus
management.metrics.export.prometheus.enabled=true
management.metrics.enable.hikaricp=true
management.metrics.enable.jvm=true
management.metrics.enable.datasource=true
management.endpoints.web.base-path=/actuator
# Health endpoint shows minimal details in production
management.endpoint.health.show-details=never

